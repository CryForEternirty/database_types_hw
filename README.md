# Домашнее задание к занятию «Базы данных, их типы»

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?


### Решение:
1.1 Реляционная СУБД (например, PostgreSQL или Oracle Database)
1.1.* 
Для ускорения хеширования можно использовать следующие подходы:
OpenSSL: низкоуровневое API для быстрого хеширования, например, с использованием алгоритмов SHA-256 или MD5.
BLAKE2: быстрый и безопасный алгоритм хеширования, который может работать быстрее, чем SHA-256.
Hardware-accelerated hashing: использование аппаратного ускорения хеширования на уровне CPU (например, Intel SHA Extensions).
1.2 
Тип СУБД для лендингов:
NoSQL-документоориентированная база данных (например, MongoDB)
Тип СУБД для CRM:
Реляционная СУБД (например, MySQL или PostgreSQL).
1.2.* Да, можно использовать PostgreSQL с расширением JSONB для лендингов и традиционной реляционной схемой для CRM
1.3 Реляционная СУБД (например, PostgreSQL)
1.3.* Да, можно использовать PostgreSQL
1.4 Графовая СУБД (например, Neo4j)
1.4.* Можно использовать одну и ту же графовую СУБД для логистики и закупок, если задачи закупок тесно связаны с маршрутами и доставкой.
1.5.* 
Теоретически можно использовать PostgreSQL для всех задач, благодаря его универсальности
Однако для наилучшей производительности и специализированных задач лучше использовать комбинацию СУБД:
PostgreSQL — для финансов, CRM и корпоративных норм.
MongoDB — для лендингов.
Neo4j — для логистики и закупок.

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

### Решение: 
2.1 

1. Инициирование транзакции пользователем. 
Пользователь вводит номер телефона, сумму для пополнения и выбирает метод оплаты (например, банковская карта, электронный кошелёк).
Система отправляет запрос на пополнение в платежный шлюз или сервис обработки платежей.

2. Проверка корректности данных. 
Система верифицирует введённый номер телефона и сумму на предмет корректности.
Проверяется наличие средств на выбранном способе оплаты.
Авторизация платежа

3. Авторизация платежа.
Платёжный шлюз взаимодействует с банком или платёжной системой для авторизации транзакции.
Если используется банковская карта, выполняется проверка CVV-кода, срока действия карты и 3D-Secure-подтверждение (если требуется).
Списание средств

4. Списание средств.
При успешной авторизации происходит блокировка или списание необходимой суммы со счёта пользователя.
Система уведомляет об успешном списании средств.
Пополнение баланса телефона

5. Пополнение баланса телефона.
Система оператора мобильной связи получает подтверждение от платёжного шлюза и обновляет баланс счёта пользователя на указанную сумму.
Генерируется уникальный идентификатор транзакции для отслеживания операции.
Уведомление пользователя

6. Уведомление пользователя.
Пользователь получает уведомление (SMS или push-уведомление) об успешном пополнении баланса.
Система фиксирует операцию в журнале транзакций для дальнейшего аудита.

2.1.*

1. Настройка автоплатежа.
Пользователь заранее настраивает автоплатёж: указывает номер телефона, сумму пополнения, минимальный порог баланса и способ оплаты.

2. Отслеживание состояния баланса.
Система оператора периодически проверяет баланс на телефоне пользователя.

3. Инициирование автоплатежа.
Когда баланс достигает минимального порога, система автоматически инициирует платёж на заранее заданную сумму.
Авторизация и списание средств

4. Авторизация и списание средств.
Система платёжного шлюза выполняет авторизацию и списание средств с привязанного метода оплаты (например, банковской карты).
При необходимости может быть использовано уведомление для подтверждения (например, SMS с кодом).

5. Пополнение баланса.
Оператор связи получает подтверждение об успешном списании средств и увеличивает баланс телефона на заданную сумму.

6. Уведомление пользователя.
Пользователь получает уведомление об успешном пополнении баланса и списании средств через автоплатёж.
Система фиксирует автоплатёж в истории транзакций для последующего контроля





---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.


### Решение: 

3.1.

1. Целостность данных и ACID-транзакции
SQL-системы строго соблюдают принципы ACID (атомарность, согласованность, изолированность, долговечность). Это гарантирует целостность и надёжность данных, особенно в финансовых и критически важных приложениях.

2. Поддержка сложных запросов
SQL-базы данных позволяют выполнять сложные аналитические запросы с использованием JOIN, GROUP BY, вложенных запросов и оконных функций. Это особенно полезно для систем, требующих глубокого анализа данных.

3. Строгая структура данных
Реляционные базы данных используют чётко определённые схемы (таблицы, поля и их типы), что помогает поддерживать организованность и целостность данных. Любые изменения схемы контролируются и требуют миграций.

4. Универсальность и стандартизация
SQL является широко принятым стандартом для работы с базами данных. Это обеспечивает совместимость между различными SQL-системами и снижает зависимость от конкретного вендора.

5. Надёжные механизмы обеспечения безопасности
SQL-СУБД предоставляют развитые механизмы аутентификации, авторизации и контроля доступа к данным на уровне строк и столбцов. Это критически важно для защиты конфиденциальных данных

3.1.*

1. Масштабируемость, как в NoSQL
NewSQL-системы обеспечивают горизонтальное масштабирование, которое характерно для NoSQL-баз данных. Это позволяет обрабатывать большие объёмы данных и высокие нагрузки, распределяя их между множеством узлов.

2. Сохранение ACID-свойств
В отличие от большинства NoSQL-баз данных, NewSQL сохраняет поддержку ACID-транзакций, обеспечивая целостность данных даже при распределённой архитектуре.

3. Высокая производительность
NewSQL-базы используют современные оптимизации, такие как обработка запросов в памяти (in-memory processing), параллельная обработка и распределённые алгоритмы, что значительно повышает производительность по сравнению с традиционными SQL-системами.

4. Упрощённое управление и администрирование
Многие NewSQL-системы автоматизируют задачи управления репликацией, шардированием и балансировкой нагрузки, что упрощает эксплуатацию и снижает требования к квалификации администраторов.

5. Совместимость с SQL
NewSQL-системы поддерживают традиционный SQL-синтаксис, что позволяет легко мигрировать существующие приложения, построенные на SQL-базах данных, без необходимости переписывать код.

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

### Решение: 

При выборе типа СУБД для обработки большого количества данных и производства большого количества вычислений, основными критериями могут быть следующие:

Производительность: СУБД должна обеспечивать высокую производительность обработки запросов и операций с данными.
Масштабируемость: СУБД должна позволять масштабировать вычислительные ресурсы в горизонтальном (добавление новых серверов) и вертикальном (увеличение мощности существующих серверов) направлении.
Отказоустойчивость: СУБД должна иметь механизмы обеспечения безопасности данных и восстановления после сбоев.
Распределенность: СУБД должна позволять распределять данные и запросы на выполнение между несколькими серверами для увеличения пропускной способности и ускорения обработки.
При выборе модели распределенных вычислений для работы с огромным количеством данных можно рассмотреть два варианта:

Модель "массовой обработки данных" (MapReduce): данная модель подходит для обработки больших объемов данных, разбивая их на части и распределяя для параллельной обработки на несколько серверов. Она эффективна в случаях, когда требуется обработать данные в пакетном режиме, без требования по мгновенному ответу. Примерами распределенных СУБД, основанных на модели MapReduce, являются Apache Hadoop (свободно распространяемый набор утилит, библиотек и фреймворк для разработки и выполнения распределённых программ, работающих на кластерах более сотен узлов) и Apache Spark.

Модель "управляемых транзакций" (ACID): данная модель подходит для обработки данных, где требуется ACID-консистентность (атомарность, согласованность, изолированность, долговечность) транзакций. Она обеспечивает возможность выполнения сложных операций с данными и соблюдение целостности данных при распределении на несколько серверов. Примеры распределенных СУБД, основанных на модели управляемых транзакций, включают MySQL Cluster, Oracle RAC и PostgreSQL.